{
    "elasticnode": {
        "_class": "se.kb.libris.whelks.component.ElasticSearchNode"
    },
    "listener": {
        "_class": "se.kb.libris.whelks.plugin.BasicListener",
        "registry": {
            "pairtreehybridstorage":["index", "fusekigraphstore"]
        }
    },
    "remotesearch": {
        "_class": "se.kb.libris.whelks.api.RemoteSearchAPI",
        "_plugins" : [
            "marcconverter"
        ],
        "_params": {
            "metaproxyInfoUrl":"http://mproxy.libris.kb.se/db_Metaproxy.xml",
            "metaproxyBaseUrl":"http://mproxy.libris.kb.se:8000"
        }
    },
    "isxntool": {
        "_class": "se.kb.libris.whelks.api.ISXNTool"
    },
    "shapecomputer": {
        "_class" : "se.kb.libris.whelks.plugin.UriToElasticType",
        "_params": {
            "defaultType": "record"
        }
    },
    "index": {
        "_class" : "se.kb.libris.whelks.component.ElasticSearchClient",
        "_plugins" : ["listener", "linkexpander", "shapecomputer", "defsindexconverter" ],
        "_params": {
            "typeConfiguration": {
                "auth" : [ "person", "organization", "conference", "concept", "conceptscheme" ],
                 "bib" : [ "text", "book", "serial" ]
            },
            "batchUpdateSize" : 2000
        },
        "_unique" : true
    },
    "pairtreediskstorage": {
        "_class" : "se.kb.libris.whelks.component.PairtreeDiskStorage",
        "_params" : {
            "storageDir": "/ssd/storage",
            "contentTypes": ["application/ld+json"],
            "baseStorageSuffix": "pairtree",
            "versioning" : false
        }
    },
    "pairtreehybridstorage": {
        "_class" : "se.kb.libris.whelks.component.PairtreeHybridDiskStorage",
        "_plugins" : [
            "index",
            "oaipmhxmlconverter",
            "marcconverter",
            "listener"
            ],
        "_params" : {
            "storageDir": "_property:STORAGE_PATH",
            "contentTypes": ["application/ld+json"],
            "baseStorageSuffix": "pairtree",
            "versioning" : false
        }
    },
    "pairtreeoaistorage": {
        "_class" : "se.kb.libris.whelks.component.PairtreeDiskStorage",
        "_params" : {
            "storageDir": "/ssd/storage",
            "contentTypes" : [ "text/oaipmh+xml" ]
        }
    },
    "cassandrastorage": {
        "_class" : "se.kb.libris.whelks.component.CassandraStorage",
        "_params" : {
            "contentTypes" : [
                "application/ld+json",
                "application/json",
                "text/plain"
            ],
            "cassandraVersion" : "1.2.15",
            "cqlVersion" : "3.0.0",
            "versioning" : true
        }
    },
    "marcjsonstorage": {
        "_class" : "se.kb.libris.whelks.component.CassandraStorage",
        "_params" : {
            "contentTypes" : [ "application/x-marc-json" ],
            "cqlVersion" : "3.0.0",
            "cassandraVersion" : "1.2.15",
            "versioning" : false
        }
    },
    "oaipmhstorage": {
        "_class" : "se.kb.libris.whelks.component.CassandraStorage",
        "_params" : {
            "contentTypes" : [ "text/oaipmh+xml" ],
            "cqlVersion" : "3.0.0",
            "cassandraVersion" : "1.2.15",
            "versioning" : false
        }
    },
    "sesamegraphstore" : {
        "_class" : "se.kb.libris.whelks.component.SesameGraphStore",
        "_params" : "http://localhost:8080/openrdf-sesame,dev-libris"
    },
    "sesamehttpendpoint": {
        "_class" : "se.kb.libris.whelks.component.HttpEndpoint",
        "_params" : {
            "queryUri": "http://localhost:8080/openrdf-sesame/repositories/dev-libris"
        }
    },
    "fusekigraphstore": {
        "_class" : "se.kb.libris.whelks.component.HttpBatchGraphStore",
        "_plugins" : [
            "turtleconverter",
            "listener"
            ],
        "_params" : {
            "graphStoreUri": "http://localhost:3030/libris/data",
            "queryUri": "http://localhost:3030/libris/query",
            "updateUri": "http://localhost:3030/libris/update",
            "contextPath": "context.jsonld",
            "baseUri": "http://libris.kb.se/resource/"
        },
        "batchUpdateSize": 1500

    },
    "marcconverter" : {
        "_class" : "se.kb.libris.whelks.plugin.MarcFrameConverter"
    },
    "turtleconverter" : {
        "_class" : "se.kb.libris.whelks.plugin.JsonLDTurtleConverter",
        "_params": "context.jsonld, http://libris.kb.se/resource/"
    },
    "swepubturtleconverter" : {
        "_class" : "se.kb.libris.whelks.swepub.plugin.SwepubTurtleConverter"
    },
    "entityextractor" : {
        "_class" : "se.kb.libris.whelks.plugin.JsonLDEntityExtractorIndexFormatConverter"
    },
    "entitysplitter" : {
        "_class" : "se.kb.libris.whelks.plugin.EntityExtractionDocumentSplitter"
    },
    "defsindexconverter" : {
        "_class" : "se.kb.libris.whelks.plugin.DefsIndexFormatConverter"
    },
    "libcount" : {
        "_class" : "se.kb.libris.whelks.api.HoldCounter",
        "_params" : {
            "path" : "_libcount",
            "defaultIndexType"  : "hold"
        }
    },
    "search" : {
        "_class" : "se.kb.libris.whelks.api.SearchAPI",
        "_params" : {
            "indexTypes" : {
                "bib" : {
                    "queryFields" : [],
                    "infoFields" : [],
                    "defaultBoost" : "about.instanceTitle.titleValue:50,about.identifier.identifierValue:50,about.instanceOf.attributedTo.controlledLabel:50,about.instanceOf.influencedBy.controlledLabel:10,about.instanceOf.subject.prefLabel:10,about.publication.providerName:10",
                    "sortby": {
                        "recordPriority" : "desc",
                        "_score" : "desc",
                        "about.instanceTitle.titleValue" : "asc",
                        "about.identifier.identifierValue" : "asc"
                    },
                    "queryFacets" : "about.@type,about.language.@id,encLevel.@id",
                    "resultFields" : [
                        "about.@type",
                        "about.instanceTitle",
                        "about.titleVariation",
                        "about.responsibilityStatement",
                        "about.publication",
                        "about.identifier",
                        "about.instanceOf.attributedTo",
                        "about.instanceOf.influencedBy",
                        "encLevel.@id"
                    ]
                },
                "auth": {
                    "queryFields": [],
                    "infoFields": [],
                    "defaultBoost": "about.uniformTitle:50,about.controlledLabel:50,about.prefLabel:50,about.altLabel:50",
                    "sortby": {
                        "recordPriority" : "desc",
                        "_score" : "desc",
                        "about.controlledLabel" : "asc",
                        "about.prefLabel" : "asc",
                        "about.altLabel" : "asc",
                        "about.uniformTitle" : "asc"
                    },
                    "queryFacets" : "about.@type"
                },
                "hold": {
                    "queryFields": [],
                    "infoFields": [],
                    "defaultBoost": "about.sublocationOrCollection:50",
                    "sortby": {
                        "recordPriority" : "desc",
                        "_score" : "desc",
                        "about.sublocationOrCollection" : "asc"
                    },
                    "queryFacets" : "about.annotates.@id"
                },
                "person" : {
                    "types" : [ "auth" ],
                    "queryFields":[
                        "about.controlledLabel",
                        "about.label",
                        "about.altLabel",
                        "about.name",
                        "about.familyName",
                        "about.givenName",
                        "about.sameAs.controlledLabel",
                        "about.@id"
                    ],
                    "infoFields":[
                        "birthYear",
                        "deathYear",
                        "authorOf",
                        "hasAnnotation.about"
                    ],
                    "defaultBoost" : "controlledLabel:50,label:50,altLabel:20",
                    "sortby": {
                        "recordPriority" : "desc",
                        "_score" : "desc",
                        "controlledLabel" : "asc",
                        "label" : "asc",
                        "altLabel" : "asc",
                        "@id" : "desc"
                    },
                    "queryProperties": {
                        "_source.include" : ["@id", "about.*"]
                    },
                    "resultKey" : "about"
                },

                "concept" : {
                    "queryFields":[
                        "about.prefLabel",
                        "about.label",
                        "about.closeMatch.inScheme.prefLabel",
                        "about.hiddenLabel"
                    ],
                    "infoFields": [],
                    "defaultBoost": "prefLabel:50,label:50,closeMatch.inScheme.prefLabel:30,hiddenLabel:20",
                    "sortby": {
                        "recordPriority" : "desc",
                        "_score" : "desc",
                        "prefLabel" : "asc",
                        "label" : "asc",
                        "closeMatch.inScheme.prefLabel" : "asc",
                        "hiddenLabel" : "asc"
                    },
                    "queryProperties": {
                        "_source.include" : ["@id", "about.*"]
                    },
                    "resultKey" : "about"
                },
                "def": {
                    "queryFields":[
                        "about.prefLabel",
                        "about.prefLabel_en",
                        "about.notation",
                        "about.langCode",
                        "about.langTag"
                    ],
                    "infoFields": [],
                    "defaultBoost": "about.prefLabel:50",
                    "sortby": {
                        "recordPriority" : "desc",
                        "_score" : "desc",
                        "about.prefLabel" : "asc",
                        "about.notation" : "asc"
                    },
                    "queryFacets" : "about.@type"
                },
                "relator": {
                    "types" : [ "def" ],
                    "queryFields":[
                        "about.label",
                        "about.label_en",
                        "about.prefLabel_en",
                        "about.notation"
                    ],
                    "defaultBoost": "about.label:50",
                    "sortby": {
                        "recordPriority" : "desc",
                        "_score" : "desc",
                        "about.label" : "asc",
                        "about.notation" : "asc"
                    },
                    "terms" : [ "about.@type:ObjectProperty" ]
                },
                "facet_expansion": {
                    "types": ["def"],
                    "queryProperties": {
                        "_source.include" : ["about.prefLabel"]
                    }
                }
            }
        }
    },
    "sparqlapi" : {
        "_class" : "se.kb.libris.whelks.api.SparqlAPI"
    },
    "elasticapi" : {
        "_class" : "se.kb.libris.whelks.api.HttpAPIRestlet",
        "_params" : {
            "pathEnd" : "_elastic",
            "varPath" : true
        }

    },
    "documentapi" : {
        "_class" : "se.kb.libris.whelks.api.DocumentAPI"
    },
    "completeexpander" : {
        "_class" : "se.kb.libris.whelks.api.CompleteExpander"
    },
    "jsonldlinkfinder" : {
        "_class" : "se.kb.libris.whelks.plugin.JsonLDLinkFinder"
    },
    "indexlinkfinder" : {
        "_class" : "se.kb.libris.whelks.plugin.IndexLinkFinder"
    },
    "linkcompleter" : {
        "_class" : "se.kb.libris.whelks.plugin.JsonLDLinkCompleterFilter"
    },
    "oaipmhxmlconverter" : {
        "_class" : "se.kb.libris.whelks.plugin.OaiPmhXmlConverter",
        "_params" : {
            "specUriMapping" : {
                "authority" : "auth",
                "bibid" : "bib"
            },
            "preserveTimestamps" : true
        }
    },
    "indexingprawn" : {
        "_class" : "se.kb.libris.whelks.plugin.IndexingPrawn",
        "_params" : {
            "batchSize" : 1000,
            "timeout" : 1
        }
    },
    "oaipmhimporter" : {
        "_class" : "se.kb.libris.whelks.importers.OAIPMHImporter",
        "_plugins" : [
            "marcconverter"
        ],
        "_params" : {
            "specUriMapping" : {
                "authority" : "auth",
                "bibid" : "bib"
            },
            "preserveTimestamps" : true
        }
    },
    "marcimporter" : {
        "_class" : "se.kb.libris.whelks.importers.DumpImporter", 
        "_params" : {
            "startTransformingAtElement" : "record"
        }
    },
    "modsimporter" : {
        "_class" : "se.kb.libris.whelks.swepub.importers.ModsImporter",
        "_params" : {
            "startTransformingAtElement" : "record"
        }
    },
    "swepuboaipmhimporter" : {
        "_class" : "se.kb.libris.whelks.importers.OAIPMHImporter",
        "_params" : {
            "serviceUrl" : "http://api.libris.kb.se/swepub/oaipmh/SWEPUB"
        }
    },
    "operator" : {
        "_class" : "se.kb.libris.whelks.api.OperatorAPI",
        "_params" : {
            "indexingQueueSize" : 50,
            "graphstoreQueueSize" : 1000,
            "indexBatchSize" : 10000,
            "graphBatchSize" : 1500
        }
    },
    "dumper" : {
        "_class" : "se.kb.libris.whelks.api.DumpAPI"
    },
    "formatter" : {
        "_class" : "se.kb.libris.whelks.api.FormatterAPI",
        "_plugins" : [
            "marcconverter"
        ]
    },
    "linkexpander" : {
        "_class" : "se.kb.libris.whelks.plugin.JsonLDLinkExpander",
        "_plugins" : [
            "index"
        ],
        "_params" : {
            "requiredDataset" : [ "bib" ],
            "nodesToExpand": {
                "about.attributedTo" : {
                    "method": "query",
                    "index" : "libris",
                    "dataset" : "auth",
                    "field" : "about.@id",
                    "queryProperties": {
                        "_source.include" : ["about.*"]
                    },
                    "resultKey" : "about"
                },
                "about.author" : {
                    "method": "query",
                    "index" : "libris",
                    "dataset" : "auth",
                    "field" : "about.@id",
                    "queryProperties": {
                        "_source.include" : ["about.*"]
                    },
                    "resultKey" : "about"
                },
                "about.language" : {
                    "method": "query",
                    "index" : "libris",
                    "dataset" : "def",
                    "field" : "about.@id",
                    "queryProperties": {
                        "_source.include" : ["@id", "about.*"]
                    },
                    "resultKey" : "about"
                },
                "about.originalLanguage" : {
                    "method": "query",
                    "index" : "libris",
                    "dataset" : "def",
                    "field" : "about.@id",
                    "queryProperties": {
                        "_source.include" : ["@id", "about.*"]
                    },
                    "resultKey" : "about"
                },
                "about.publicationCountry" : {
                    "method": "query",
                    "index" : "libris",
                    "dataset" : "def",
                    "field" : "about.@id",
                    "queryProperties": {
                        "_source.include" : ["@id", "about.*"]
                    },
                    "resultKey" : "about"
                },
                "about.not.used.language" : {
                    "method" : "http",
                    "url" : "http://localhost:8180/whelk-webapi"
                },
                "about.nonsense.at.the.same.whelk" : {
                    "method" : "get"
                }

            }
        }
    }
}
