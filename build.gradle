allprojects {
    version "0.1.1"

    apply plugin: 'java'
    apply plugin: 'groovy'

    sourceSets {
        main {
            java { srcDirs = [] }
            groovy { srcDir 'src/main/' }
        }
        test {
            groovy { srcDir 'src/test/groovy/' }
        }
    }


}

subprojects {
    repositories {
        mavenCentral()
        maven { url "http://oss.sonatype.org/content/repositories/releases/" }
        maven { url "http://maven.restlet.org/" }
        maven { url "http://repository.codehaus.org/" }
        flatDir name: 'localDir', dirs: '../lib'
    }

    task devLogging(dependsOn: 'classes', type: Copy) {
        copy {
            from('../etc')
            include('logback_dev.xml')
            rename('logback_dev.xml','logback.xml')
            into "build/resources/main"
        }
    }
}

project(":whelk-extensions") {
    dependencies {
        compile project(":whelk-core")
    }
}

project(":whelk-webapi") {
    apply plugin: 'jetty'
    apply plugin: 'war'
    dependencies {
        compile project(":whelk-core")
        compile project(":whelk-extensions")
        providedCompile 'javax.servlet:servlet-api:2.5'
    }
}
